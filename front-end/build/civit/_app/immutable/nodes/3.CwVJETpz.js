import{c as S,a as o,f as b,t as U,s as h}from"../chunks/CBNpY5ZP.js";import{p as dt,j as g,v as Ft,k as ut,m as t,n as a,w as D,q as s,g as e,x as Gt,s as it,l as C,t as V,i as Qt,o as Rt,y as Yt}from"../chunks/CJesd75e.js";import{I as te,s as ee,A as yt,u as Mt,B as kt,a as ae,S as se,b as re,e as oe,c as le,d as ne}from"../chunks/fIJhbE0q.js";import{s as ie,r as de,c,i as ue}from"../chunks/fEvOx0xl.js";import{D as ce,a as ve,b as pe,c as he,d as ge,e as me,t as _e,T as fe,f as $e,g as we,h as E,i as Z}from"../chunks/C_zV3QB9.js";function xe(i,v){dt(v,!0);let f=de(v,["$$slots","$$events","$$legacy"]);const l=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];te(i,ie({name:"plus"},()=>f,{get iconNode(){return l},children:($,ct)=>{var I=S(),K=g(I);ee(K,()=>v.children??Ft),o($,I)},$$slots:{default:!0}})),ut()}const be=!1,Je=Object.freeze(Object.defineProperty({__proto__:null,ssr:be},Symbol.toStringTag,{value:"Module"}));async function ke(i){let v={};if(i.length<1)return{status:400,data:v};let f=0;if(ye(i))f=parseInt(i);else{const l=i.split("/models/");if(l.length<2)return{status:400,data:v};f=parseInt(l[1].split("/")[0])}try{const l=await fetch(yt.get_model_by_id(Mt.token,f));return l.status!==200?{status:400,data:v}:{status:200,data:await l.json()}}catch{return{status:400,data:{}}}}function ye(i){return typeof i=="string"&&i.trim()!==""&&!Number.isNaN(Number(i))}var Me=b("<!> Download",1),Pe=b("<!> <!>",1),De=b('<!> <div class="grid gap-4"><!></div> <!>',1),Se=b("<form><!></form>"),Ce=b("<!> Download model",1),je=b('<img style="width: 100%;" class="block rounded-xs" alt=""/>'),Ne=b('<div class="w-full h-full"><h2 class="scroll-m-20 text-2xl font-semibold tracking-tight"> </h2> <div class="model-details flex align-middle pt-2 gap-4"><span class="flex items-center gap-2 text-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-icon lucide-user"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg> </span> <span class="flex items-center gap-2 text-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-layers-icon lucide-layers"><path d="M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"></path><path d="M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"></path><path d="M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"></path></svg> </span> <span class="flex items-center gap-2 text-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar-icon lucide-calendar"><path d="M8 2v4"></path><path d="M16 2v4"></path><rect width="18" height="18" x="3" y="4" rx="2"></rect><path d="M3 10h18"></path></svg> </span></div> <div class="model-details flex align-middle pt-4 gap-4"><span class="flex items-center gap-2 text-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-to-line-icon lucide-arrow-down-to-line"><path d="M12 17V3"></path><path d="m6 11 6 6 6-6"></path><path d="M19 21H5"></path></svg> </span> <span class="flex items-center gap-2 text-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-thumbs-up-icon lucide-thumbs-up"><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"></path><path d="M7 10v12"></path></svg> </span> <span class="flex items-center gap-2 text-muted-foreground"><svg style="rotate: 180deg;" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-thumbs-up-icon lucide-thumbs-up"><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"></path><path d="M7 10v12"></path></svg> </span> <span class="flex items-center gap-2 text-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-zap-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg> </span></div> <div class="model-details flex align-middle pt-8 gap-2 w-full flex-col text-muted-foreground" style="max-width: 400px"><div class="flex items-center"><span> </span> <span class="block ml-auto" style="font-size: .85em"> </span></div> <div class="block w-full"><div data-slot="progress" class="bg-primary/20 relative h-2 overflow-hidden rounded-full w-full" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="66" data-value="66" data-state="loading" data-max="100" data-min="0" data-progress-root=""><div data-slot="progress-indicator" class="bg-primary h-full w-full flex-1 transition-all"></div></div></div></div></div>'),ze=b("<!> <!> <!> <!>",1),Ae=b('<div class="flex items-center py-4"><div class="actions flex items-center ml-auto"><!> <!></div></div> <!>',1);function Be(i,v){dt(v,!0);const f=m=>{var y=S(),w=g(y);c(w,()=>me,(T,O)=>{O(T,{get open(){return e(l)},children:(X,gt)=>{var j=Se(),F=a(j);c(F,()=>ce,(mt,L)=>{L(mt,{children:(G,H)=>{var r=De(),N=g(r);c(N,()=>ve,(A,J)=>{J(A,{children:(P,q)=>{var k=S(),M=g(k);c(M,()=>pe,(B,d)=>{d(B,{children:(p,u)=>{D();var x=U("Download a new model");o(p,x)},$$slots:{default:!0}})}),o(P,k)},$$slots:{default:!0}})});var z=t(N,2),Q=a(z);ae(Q,{min:"1",id:"modelParam",type:"text",required:!0,placeholder:"Paste the model id or page url",class:"w-full"}),s(z);var R=t(z,2);c(R,()=>he,(A,J)=>{J(A,{children:(P,q)=>{var k=Pe(),M=g(k);{let d=Gt(()=>re({variant:"outline"}));c(M,()=>ge,(p,u)=>{u(p,{get class(){return e(d)},children:(x,n)=>{D();var _=U("Cancel");o(x,_)},$$slots:{default:!0}})})}var B=t(M,2);kt(B,{type:"submit",get disabled(){return e($)},onclick:ct,children:(d,p)=>{var u=Me(),x=g(u);{var n=_=>{se(_,{})};ue(x,_=>{e($)&&_(n)})}D(),o(d,u)},$$slots:{default:!0}}),o(P,k)},$$slots:{default:!0}})}),o(G,r)},$$slots:{default:!0}})}),s(j),o(X,j)},$$slots:{default:!0}})}),o(m,y)};let l=it(!1),$=it(!1);async function ct(m){C($,!0);const y=document.querySelector("#modelParam").value.trim();let w=await ke(y);if(C($,!1),w.status!==200){_e.error("The provided url/id is not valid");return}C(l,!1),window.dispatchEvent(new CustomEvent("DownloadManagerShowModelVersions",{detail:{ModelData:w.data}}))}const I={year:"numeric",month:"long",day:"numeric"};function K(m){return m&&m[0].toUpperCase()+m.substr(1).toLowerCase()}var vt=Ae(),W=g(vt),pt=a(W),ht=a(pt);kt(ht,{onclick:()=>{C(l,!1),C(l,!0)},variant:"outline",children:(m,y)=>{var w=Ce(),T=g(w);xe(T,{}),D(),o(m,w)},$$slots:{default:!0}});var Pt=t(ht,2);f(Pt),s(pt),s(W);var Dt=t(W,2);c(Dt,()=>$e,(m,y)=>{y(m,{children:(w,T)=>{var O=S(),X=g(O);c(X,()=>fe,(gt,j)=>{j(gt,{children:(F,mt)=>{var L=S(),G=g(L);oe(G,17,()=>v.downloads,H=>H.id,(H,r)=>{var N=S(),z=g(N);c(z,()=>we,(Q,R)=>{R(Q,{children:(A,J)=>{var P=ze(),q=g(P);c(q,()=>E,(d,p)=>{p(d,{class:"font-medium",style:"width: 160px;",children:(u,x)=>{var n=je();V(()=>le(n,"src",e(r).cover)),o(u,n)},$$slots:{default:!0}})});var k=t(q,2);c(k,()=>E,(d,p)=>{p(d,{children:(u,x)=>{var n=Ne(),_=a(n),St=a(_,!0);s(_);var Y=t(_,2),tt=a(Y),Ct=t(a(tt));s(tt);var et=t(tt,2),jt=t(a(et));s(et);var _t=t(et,2),Nt=t(a(_t));s(_t),s(Y);var at=t(Y,2),st=a(at),zt=t(a(st));s(st);var rt=t(st,2),At=t(a(rt));s(rt);var ot=t(rt,2),Bt=t(a(ot));s(ot);var ft=t(ot,2),It=t(a(ft));s(ft),s(at);var $t=t(at,2),lt=a($t),nt=a(lt),Tt=a(nt,!0);s(nt);var wt=t(nt,2),Ot=a(wt);s(wt),s(lt);var xt=t(lt,2),bt=a(xt),Lt=a(bt);s(bt),s(xt),s($t),s(n),V((Ht,Jt,qt,Ut,Vt,Et,Zt,Kt,Wt,Xt)=>{h(St,e(r).base_model),h(Ct,` ${Ht??""}`),h(jt,` ${e(r).based_on_model??""}`),h(Nt,` ${Jt??""}`),h(zt,` ${qt??""}`),h(At,` ${Ut??""}`),h(Bt,` ${Vt??""}`),h(It,` ${Et??""}`),h(Tt,Zt),h(Ot,`${Kt??""}/s (${Wt??""} / ${Xt??""})`),ne(Lt,`transform: translateX(-${100-e(r).downloaded*100/e(r).total_size}%);`)},[()=>e(r).author_name.replace('"',""),()=>new Date(e(r).published_at).toLocaleDateString("en-UK",I),()=>JSON.parse(e(r).stats.slice(0,-1)).downloadCount,()=>JSON.parse(e(r).stats.slice(0,-1)).thumbsUpCount,()=>JSON.parse(e(r).stats.slice(0,-1)).thumbsDownCount,()=>JSON.parse(e(r).stats.slice(0,-1)).tippedAmountCount,()=>K(e(r).status),()=>Z(Math.round(e(r).download_speed)).toString(),()=>Z(Math.round(e(r).downloaded)).toString(),()=>Z(Math.round(Math.max(e(r).total_size,1))).toString()]),o(u,n)},$$slots:{default:!0}})});var M=t(k,2);c(M,()=>E,(d,p)=>{p(d,{children:(u,x)=>{D();var n=U();V(()=>h(n,e(r).model_name)),o(u,n)},$$slots:{default:!0}})});var B=t(M,2);c(B,()=>E,(d,p)=>{p(d,{children:(u,x)=>{D();var n=U();V(_=>h(n,_),[()=>Z(Math.round(e(r).total_size)).toString()]),o(u,n)},$$slots:{default:!0}})}),o(A,P)},$$slots:{default:!0}})}),o(H,N)}),o(F,L)},$$slots:{default:!0}})}),o(w,O)},$$slots:{default:!0}})}),o(i,vt),ut()}function qe(i,v){dt(v,!0);let f=0,l=it(Qt([]));Rt(()=>{f=setInterval(async()=>{const $=await fetch(yt.list_downloads(Mt.token));$.status===200&&C(l,await $.json(),!0)},500)}),Yt(()=>{clearInterval(f)}),Be(i,{get downloads(){return e(l)}}),ut()}export{qe as component,Je as universal};
