import{c as J,a as o,f as h,t as ae,s as p}from"../chunks/c9hODnuz.js";import{p as $e,j as i,v as ft,k as xe,n as r,w as H,m as e,q as s,g as a,x as Ae,s as oe,l as D,t as re,i as gt,o as $t,y as xt}from"../chunks/Dbj44rWr.js";import{I as wt,s as bt,A as qe,u as Ue,a as Be,B as ge,S as kt,b as yt,e as Mt,c as Ie,d as Pt}from"../chunks/p_LJZykJ.js";import{s as Ct,r as Dt,i as Le,c as n}from"../chunks/Wlt88ymP.js";import{D as St,a as jt,b as Nt,c as zt,d as Tt,e as At,t as Bt,T as It,f as Oe,g as Lt,C as He,h as Ot,i as G,j as se,k as Ht}from"../chunks/F9mfd4bi.js";function Je(u,c){$e(c,!0);let f=Dt(c,["$$slots","$$events","$$legacy"]);const v=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];wt(u,Ct({name:"plus"},()=>f,{get iconNode(){return v},children:($,j)=>{var N=J(),le=i(N);bt(le,()=>c.children??ft),o($,N)},$$slots:{default:!0}})),xe()}const Jt=!1,ia=Object.freeze(Object.defineProperty({__proto__:null,ssr:Jt},Symbol.toStringTag,{value:"Module"}));async function qt(u){let c={};if(u.length<1)return{status:400,data:c};let f=0;if(Ut(u))f=parseInt(u);else{const v=u.split("/models/");if(v.length<2)return{status:400,data:c};f=parseInt(v[1].split("/")[0])}try{const v=await fetch(qe.get_model_by_id(Ue.token,f));return v.status!==200?{status:400,data:c}:{status:200,data:await v.json()}}catch{return{status:400,data:{}}}}function Ut(u){return typeof u=="string"&&u.trim()!==""&&!Number.isNaN(Number(u))}var Vt=h("<!> Download",1),Et=h("<!> <!>",1),Zt=h('<!> <div class="grid gap-4"><!></div> <!>',1),Kt=h("<form><!></form>"),Wt=h("<!> Download model",1),Xt=h(`<div class="flex flex-col items-center py-4 gap-6"><h2 class="text-center">You haven't downloaded any models yet.</h2> <div class="actions flex items-center mx-auto"><!></div></div>`),Yt=h("<!> Download model",1),Ft=h('<video autoplay style="width: 100%;" class="block rounded-xs" loop preload="auto" disablepictureinpicture=""><source type="video/webm"/></video>',2),Gt=h('<div class="w-full h-full"><h2 class="scroll-m-20 text-2xl font-semibold tracking-tight"> </h2> <h2 class="scroll-m-20 text-xs font-normal tracking-tight pt-2 text-muted-foreground"> </h2> <div class="model-details flex align-middle pt-5 gap-4"><span class="flex items-center gap-2 text-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-icon lucide-user"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg> </span> <span class="flex items-center gap-2 text-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-layers-icon lucide-layers"><path d="M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"></path><path d="M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"></path><path d="M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"></path></svg> </span> <span class="flex items-center gap-2 text-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar-icon lucide-calendar"><path d="M8 2v4"></path><path d="M16 2v4"></path><rect width="18" height="18" x="3" y="4" rx="2"></rect><path d="M3 10h18"></path></svg> </span></div> <div class="model-details flex align-middle pt-4 gap-4"><span class="flex items-center gap-2 text-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-to-line-icon lucide-arrow-down-to-line"><path d="M12 17V3"></path><path d="m6 11 6 6 6-6"></path><path d="M19 21H5"></path></svg> </span> <span class="flex items-center gap-2 text-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-thumbs-up-icon lucide-thumbs-up"><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"></path><path d="M7 10v12"></path></svg> </span> <span class="flex items-center gap-2 text-muted-foreground"><svg style="rotate: 180deg;" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-thumbs-up-icon lucide-thumbs-up"><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"></path><path d="M7 10v12"></path></svg> </span> <span class="flex items-center gap-2 text-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-zap-icon lucide-zap"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path></svg> </span></div> <div class="model-details flex align-middle pt-8 gap-2 w-full flex-col text-muted-foreground" style="max-width: 400px"><div class="flex items-center"><span> </span> <span class="block ml-auto" style="font-size: .85em"> </span></div> <div class="block w-full"><div data-slot="progress" class="bg-primary/20 relative h-2 overflow-hidden rounded-full w-full" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="66" data-value="66" data-state="loading" data-max="100" data-min="0" data-progress-root=""><div data-slot="progress-indicator" class="bg-primary h-full w-full flex-1 transition-all"></div></div></div></div></div>'),Qt=h("<!> <!> <!> <!> <!>",1),Rt=h("<!> <!>",1),ea=h('<div class="flex items-center py-4"><div class="mr-12 w-full"><!></div> <div class="actions flex items-center ml-auto"><!></div></div> <!>',1),ta=h("<!> <!>",1);function aa(u,c){$e(c,!0);const f=l=>{var _=J(),m=i(_);n(m,()=>At,(z,V)=>{V(z,{get open(){return a(j)},children:(E,Z)=>{var T=Kt(),A=r(T);n(A,()=>St,(Q,q)=>{q(Q,{children:(R,ne)=>{var K=Zt(),ee=i(K);n(ee,()=>jt,(Y,x)=>{x(Y,{children:(I,L)=>{var t=J(),w=i(t);n(w,()=>Nt,(U,g)=>{g(U,{children:(S,b)=>{H();var k=ae("Download a new model");o(S,k)},$$slots:{default:!0}})}),o(I,t)},$$slots:{default:!0}})});var B=e(ee,2),W=r(B);Be(W,{min:"1",id:"modelParam",type:"text",required:!0,placeholder:"Paste the model id or page url",class:"w-full"}),s(B);var X=e(B,2);n(X,()=>zt,(Y,x)=>{x(Y,{children:(I,L)=>{var t=Et(),w=i(t);{let g=Ae(()=>yt({variant:"outline"}));n(w,()=>Tt,(S,b)=>{b(S,{get class(){return a(g)},children:(k,F)=>{H();var y=ae("Cancel");o(k,y)},$$slots:{default:!0}})})}var U=e(w,2);ge(U,{type:"submit",get disabled(){return a(N)},onclick:le,children:(g,S)=>{var b=Vt(),k=i(b);{var F=y=>{kt(y,{})};Le(k,y=>{a(N)&&y(F)})}H(),o(g,b)},$$slots:{default:!0}}),o(I,t)},$$slots:{default:!0}})}),o(R,K)},$$slots:{default:!0}})}),s(T),o(E,T)},$$slots:{default:!0}})}),o(l,_)},v=l=>{var _=Xt(),m=e(r(_),2),z=r(m);ge(z,{onclick:()=>{D(j,!1),D(j,!0)},variant:"outline",children:(V,E)=>{var Z=Wt(),T=i(Z);Je(T,{}),H(),o(V,Z)},$$slots:{default:!0}}),s(m),s(_),o(l,_)};let $=oe(""),j=oe(!1),N=oe(!1);async function le(l){D(N,!0);const _=document.querySelector("#modelParam").value.trim();let m=await qt(_);if(D(N,!1),m.status!==200){Bt.error("The provided url/id is not valid");return}D(j,!1),window.dispatchEvent(new CustomEvent("DownloadManagerShowModelVersions",{detail:{ModelData:m.data}}))}const Ve={year:"numeric",month:"long",day:"numeric"};function Ee(l){return l&&l[0].toUpperCase()+l.substring(1).toLowerCase()}function we(l){}var be=ta(),ke=i(be);f(ke);var Ze=e(ke,2);{var Ke=l=>{v(l)},We=l=>{var _=ea(),m=i(_),z=r(m),V=r(z);Be(V,{type:"text",placeholder:"Search by model name",style:"max-width: 400px;",get value(){return a($)},set value(A){D($,A,!0)}}),s(z);var E=e(z,2),Z=r(E);ge(Z,{onclick:()=>{D(j,!1),D(j,!0)},variant:"outline",children:(A,Q)=>{var q=Yt(),R=i(q);Je(R,{}),H(),o(A,q)},$$slots:{default:!0}}),s(E),s(m);var T=e(m,2);n(T,()=>Ht,(A,Q)=>{Q(A,{children:(q,R)=>{var ne=Rt(),K=i(ne);n(K,()=>It,(B,W)=>{W(B,{children:(X,Y)=>{var x=J(),I=i(x);n(I,()=>Oe,(L,t)=>{t(L,{children:(w,U)=>{var g=J(),S=i(g);n(S,()=>Lt,(b,k)=>{k(b,{children:(F,y)=>{He(F,{"data-version-id":"headerCheckbox",onclick:we})},$$slots:{default:!0}})}),o(w,g)},$$slots:{default:!0}})}),o(X,x)},$$slots:{default:!0}})});var ee=e(K,2);n(ee,()=>Ot,(B,W)=>{W(B,{children:(X,Y)=>{var x=J(),I=i(x);Mt(I,17,()=>c.downloads,L=>L.id,(L,t)=>{var w=J(),U=i(w);{let g=Ae(()=>a(t).base_model.toLowerCase().includes(a($).toLowerCase())?"":"position: absolute; scale: 0");n(U,()=>Oe,(S,b)=>{b(S,{get style(){return a(g)},children:(k,F)=>{var y=Qt(),ye=i(y);n(ye,()=>G,(M,P)=>{P(M,{class:"font-medium",style:"width: min-content;",children:(C,te)=>{He(C,{get"data-version-id"(){return a(t).id},onclick:we})},$$slots:{default:!0}})});var Me=e(ye,2);n(Me,()=>G,(M,P)=>{P(M,{class:"font-medium",style:"width: 160px;",children:(C,te)=>{var d=Ft();d.muted=!0;var O=r(d);s(d),re(()=>{Ie(d,"poster",a(t).cover),Ie(O,"src",a(t).cover)}),o(C,d)},$$slots:{default:!0}})});var Pe=e(Me,2);n(Pe,()=>G,(M,P)=>{P(M,{children:(C,te)=>{var d=Gt(),O=r(d),Ye=r(O,!0);s(O);var ie=e(O,2),Fe=r(ie,!0);s(ie);var de=e(ie,2),ue=r(de),Ge=e(r(ue));s(ue);var ce=e(ue,2),Qe=e(r(ce));s(ce);var De=e(ce,2),Re=e(r(De));s(De),s(de);var ve=e(de,2),pe=r(ve),et=e(r(pe));s(pe);var he=e(pe,2),tt=e(r(he));s(he);var _e=e(he,2),at=e(r(_e));s(_e);var Se=e(_e,2),rt=e(r(Se));s(Se),s(ve);var je=e(ve,2),me=r(je),fe=r(me),st=r(fe,!0);s(fe);var Ne=e(fe,2),ot=r(Ne);s(Ne),s(me);var ze=e(me,2),Te=r(ze),lt=r(Te);s(Te),s(ze),s(je),s(d),re((nt,it,dt,ut,ct,vt,pt,ht,_t,mt)=>{p(Ye,a(t).base_model),p(Fe,a(t).file_name),p(Ge,` ${nt??""}`),p(Qe,` ${a(t).based_on_model??""}`),p(Re,` ${it??""}`),p(et,` ${dt??""}`),p(tt,` ${ut??""}`),p(at,` ${ct??""}`),p(rt,` ${vt??""}`),p(st,pt),p(ot,`${ht??""}/s (${_t??""} / ${mt??""})`),Pt(lt,`transform: translateX(-${100-a(t).downloaded*100/a(t).total_size}%);`)},[()=>a(t).author_name.replace('"',""),()=>new Date(a(t).published_at).toLocaleDateString("en-UK",Ve),()=>JSON.parse(a(t).stats.slice(0,-1)).downloadCount,()=>JSON.parse(a(t).stats.slice(0,-1)).thumbsUpCount,()=>JSON.parse(a(t).stats.slice(0,-1)).thumbsDownCount,()=>JSON.parse(a(t).stats.slice(0,-1)).tippedAmountCount,()=>Ee(a(t).status),()=>se(Math.round(a(t).download_speed)).toString(),()=>se(Math.round(a(t).downloaded)).toString(),()=>se(Math.round(Math.max(a(t).total_size,1))).toString()]),o(C,d)},$$slots:{default:!0}})});var Ce=e(Pe,2);n(Ce,()=>G,(M,P)=>{P(M,{children:(C,te)=>{H();var d=ae();re(()=>p(d,a(t).model_name)),o(C,d)},$$slots:{default:!0}})});var Xe=e(Ce,2);n(Xe,()=>G,(M,P)=>{P(M,{children:(C,te)=>{H();var d=ae();re(O=>p(d,O),[()=>se(Math.round(a(t).total_size)).toString()]),o(C,d)},$$slots:{default:!0}})}),o(k,y)},$$slots:{default:!0}})})}o(L,w)}),o(X,x)},$$slots:{default:!0}})}),o(q,ne)},$$slots:{default:!0}})}),o(l,_)};Le(Ze,l=>{c.downloads.length<1?l(Ke):l(We,!1)})}o(u,be),xe()}function da(u,c){$e(c,!0);let f=0,v=oe(gt([]));$t(()=>{f=setInterval(async()=>{const $=await fetch(qe.list_downloads(Ue.token));$.status===200&&D(v,await $.json(),!0)},500)}),xt(()=>{clearInterval(f)}),aa(u,{get downloads(){return a(v)}}),xe()}export{da as component,ia as universal};
